(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,a){e.exports=a(370)},370:function(e,t,a){"use strict";a.r(t);a(148),a(173);var n=a(0),o=a.n(n),r=a(77),l=a.n(r),c=a(78),i=a.n(c),s=a(79),u=a(138),d=a(139),g=a(145),h=a(140),m=a(146),p=a(17),C=a(3),b=(a(195),a(141)),f=a.n(b),v=a(142),k=a.n(v),E=a(80),y=a.n(E),w=a(143),F=a(81),S=a(144),D=a.n(S),x=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(g.a)(this,Object(h.a)(t).call(this,e))).onBackgroundColorChange=function(e){a.setState({backgroundColor:e.hex})},a.onForegroundColorChange=function(e){a.setState({foregroundColor:e.hex})},a.state={url:"https://vk.com/vkapps_qr",isShowLogo:!0,logoData:!1,isShowBackground:!0,backgroundColor:"#ffffff",foregroundColor:"#000000",allowDownload:!1},a.svgRef=o.a.createRef(),a.onChange=a.onChange.bind(Object(p.a)(Object(p.a)(a))),a.onUpload=a.onUpload.bind(Object(p.a)(Object(p.a)(a))),a.savePNG=a.savePNG.bind(Object(p.a)(Object(p.a)(a))),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=D.a.parse(window.location.search);this.setState({allowDownload:-1==["mobile_android","mobile_iphone"].indexOf(e.vk_platform)})}},{key:"savePNG",value:function(){Object(w.saveSvgAsPng)(this.svgRef.current.children[0],"png.png")}},{key:"onUpload",value:function(e){var t=this,a=e.currentTarget.files[0];if(a&&"image/svg+xml"===a.type){var n=new FileReader;n.readAsDataURL(a),n.onload=function(){t.setState({logoData:n.result})}}}},{key:"onChange",value:function(e){var t=e.currentTarget,a=t.name,n=t.value,o=t.checked;"isShowLogo"===a||"isShowBackground"===a?this.setState(Object(s.a)({},a,o)):this.setState(Object(s.a)({},a,n))}},{key:"render",value:function(){var e=this.state,t=e.allowDownload,a=e.url,n=e.isShowLogo,r=e.isShowBackground,l=e.backgroundColor,c=e.foregroundColor,i={isShowLogo:n,isShowBackground:r,backgroundColor:l,foregroundColor:c,logoData:e.logoData},s=f.a.createQR(a,256,"classCode",i);return o.a.createElement(C.View,{activePanel:"mainPanel"},o.a.createElement(C.Panel,{id:"mainPanel"},o.a.createElement(C.PanelHeader,null,"QR"),o.a.createElement(C.Group,{title:"\u0421\u0441\u044b\u043b\u043a\u0430"},o.a.createElement(C.FormLayout,null,o.a.createElement(C.Input,{type:"string",name:"url",value:a,onChange:this.onChange,status:a?"valid":"error",bottom:a?"":"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443"}))),o.a.createElement(C.Group,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"},o.a.createElement(C.FormLayout,null,o.a.createElement(C.Checkbox,{name:"isShowLogo",checked:n,onChange:this.onChange},"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043b\u043e\u0433\u043e\u0442\u0438\u043f"),n?o.a.createElement(C.Input,{top:"SVG-\u043b\u043e\u0433\u043e\u0442\u0438\u043f",type:"file",name:"embed",onChange:this.onUpload,accept:"image/svg+xml"}):null,n?o.a.createElement(C.FormLayoutGroup,{top:"\u0426\u0432\u0435\u0442 QR-\u043a\u043e\u0434\u0430"},o.a.createElement(C.Div,null,o.a.createElement("div",{style:{borderRadius:25,background:"var(--background_page)",padding:5,display:"flex",justifyContent:"center"}},o.a.createElement(F.CirclePicker,{triangle:"hide",colors:["#000000","#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC"],color:c,onChangeComplete:this.onForegroundColorChange})))):null,o.a.createElement(C.Checkbox,{name:"isShowBackground",checked:r,onChange:this.onChange},"\u0424\u043e\u043d"),r?o.a.createElement(C.FormLayoutGroup,{top:"\u0426\u0432\u0435\u0442 \u0444\u043e\u043d\u0430"},o.a.createElement(C.Div,null,o.a.createElement("div",{style:{borderRadius:25,background:"var(--background_page)",padding:5,display:"flex",justifyContent:"center"}},o.a.createElement(F.CirclePicker,{style:{backgroundColor:"red"},triangle:"hide",colors:["#FFFFFF","#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC"],color:l,onChangeComplete:this.onBackgroundColorChange})))):null)),o.a.createElement(C.Div,null,o.a.createElement(C.Div,{style:{textAlign:"center"}},o.a.createElement("span",{ref:this.svgRef,dangerouslySetInnerHTML:{__html:a?s:""}})),t?o.a.createElement(C.Div,{style:{display:"flex",justifyContent:"space-between"}},o.a.createElement(C.Button,{before:o.a.createElement(y.a,null),size:"xl",style:{maxWidth:"calc(50% - 4px)"},onClick:this.savePNG,stretched:!0},"PNG"),o.a.createElement(k.a,{file:"qr.svg",content:s,style:{flexGrow:1,maxWidth:"calc(50% - 4px)"}},o.a.createElement(C.Button,{before:o.a.createElement(y.a,null),size:"xl",stretched:!0},"SVG"))):null)))}}]),t}(o.a.Component);i.a.subscribe(function(e){switch(e.detail.type){case"VKWebAppUpdateConfig":var t=document.createAttribute("scheme");t.value=e.detail.data.scheme?e.detail.data.scheme:"client_light",document.body.attributes.setNamedItem(t);break;default:console.log("Connect: "+JSON.stringify(e))}}),i.a.send("VKWebAppInit",{}),l.a.render(o.a.createElement(x,null),document.getElementById("root"))}},[[147,1,2]]]);
//# sourceMappingURL=main.16a20d7b.chunk.js.map